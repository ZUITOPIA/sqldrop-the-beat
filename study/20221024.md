> 20221024 기록 : 식별자

### 식별자 개념

엔터티 : 인스턴스들의 집합
식별자 : 엔터티 내에서 인스턴스들을 구분할 수 있는 구분자
-> 하나의 엔터티는 반드시 하나의 유일한 식별자 존재함

여기서, 식별자와 키의 차이는 ?
식별자 - 논리 데이터 모델링 단계에서 사용
키 - 물리 데이터 모델링 단계에서 사용

---

### 식별자 특징

주식별자 / 외부식별자 로 구분
**주식별자** 의 특징 : 유일성, 최소성, 불변성, 존재성
외부식별자 : 주식별자 특징과 일치하지 않으며 참조무결성 제약조건(Referential Integrity)에 따른 특징을 가짐

---

### 식별자 분류

대표성 여부 -> 주식별자 vs 보조식별자
스스로 생성 여부 -> 내부식별자 vs 외부식별자
속성의 수 -> 단일식별자 vs 복합식별자
대체여부 -> 본질식별자 vs 인조식별자

|   식별자   |                       특징                       |
| :--------: | :----------------------------------------------: |
|  주식별자  |     대표성 O, 타 엔터티와 참조관계 연결 가능     |
| 보조식별자 |    대표성 X, 타 엔터티와 참조관계 연결 불가능    |
| 내부식별자 |          엔터티 내부에서 스스로 생성됨           |
| 외부식별자 | 타 엔터티와의 관계를 통해 타 엔터티로부터 받아옴 |
| 단일식별자 |               하나의 속성으로 구성               |
| 복합식별자 |             둘 이상의 속성으로 구성              |
| 본질식별자 |                 업무에 의해 생성                 |
| 인조식별자 |    데이터 모델 단순화를 위해 인위적으로 생성     |

---

### 주식별자 도출 기준

주식별자 도출작업 : 데이터 모델링 작업에서 중요

- 업무에서 자주 이용되는 속성을 주식별자로 지정
  예 : 직원(엔터티)의 사원번호(주식별자), 주민등록번호(보조식별자)
- 명칭, 내역 등 이름으로 기술되는 것은 주식별자로 지정 X
  예 : 부서명의 경우 부서 코드를 부여해 코드엔터티에 등록한 후 부서코드로 주식별자 지정, 부서명은 보조식별자로 활용
- 너무 많은 속성(일반적으로 7~8개 이상이면 새로운 인조식별자 생성함)이 포함되지 않도록

---

### 식별자 관계와 비식별자 관계에 따른 식별자

- 식별자 관계와 비식별자 관계의 결정

엔터티에 주식별자 지정 -> 엔터티 간의 관계 연결 -> 부모쪽의 주식별자를 자식엔터티의 속성으로 내려보냄(외부식별자 받음) -> 받은 외부식별자를 '자식엔터티의 주식별자'로 이용할 것인지 ? 단지 '부모와 연결되는 속성'으로서만 이용할 것인지 ? 결정

> 외부식별자 : 자기 자신의 엔터티에서 필요한 속성이 아닌, 다른 엔터티와의 관계를 통 자식 쪽 엔터티에 생성되는 속성, 데이터베이스 생성 시 Foreign Key 역할

- 식별자 관계
  | 관계 | 특징 |
  | :--------: | :----------------------------------------------: |
  | 1:1 관계 | 부모로부터 받은 속성을 자식엔터티의 주식별자로 이용하며 유일한 식별자인 경우 |
  | 1:M 관계 | 부모 + 다른 부모엔터티에서 받은 속성을 포함하거나 스스로 갖고 있는 속성들과 함께 주식별자로 구성되는 경우 |

  > 문제점 : 식별자 관계만으로 연결된 데이터 모델의 특징은 주식별자 속성이 지속적으로 증가할 수 밖에 없는 구조로서 개발자 복잡성과 오류가능성을 유발시킬 수 있는 요인이 될 수 있음

- 비식별자 관계
  => 부모엔터티로부터 받은 속성을 자식엔터티의 주식별자로 사용하지 않고 속성으로만 사용할 때

  1. 부모 없는 자식이 생성될 수 있는 경우
  2. 엔터티마다 데이터의 생명주기(Life Cycle)을 다르게 관리하는 경우 (부모가 자식만 남겨두고 먼저 소멸할 때)
  3. 여러 개의 엔터티가 하나의 엔터티로 통합되어 표현돼 있지만 각각 별도의 관계를 가질 때

  > 문제점 : 엔터티 간의 관계를 비식별자 관계로 설정하면 이런 유형의 속성이 자식엔터티로 상속이 되지 않아 자식엔터티에서 데이터를 처리할 때 쓸데없이 부모엔터티까지 찾아가야 하는 경우가 발생함

---

### 식별자 관계와 비식별자 관계 모델링

식별자 관계에서 비식별자 관계를 파악하는 기술(식별자 관계로 모든 관계가 연결되면서 **자식엔터티의 독립된 주식별자 구성이 필요한 경우** 비식별자관계로 조정)이 필요

|        항목        |                                                     식별자 관계                                                     |                                                               비식별자 관계                                                                |
| :----------------: | :-----------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
|        목적        |                                                 강한 연결관계 표현                                                  |                                                             약한 연결관계 표현                                                             |
| 자식 주식별자 영향 |                                            자식 주식별자의 구성에 포함됨                                            |                                                          자식 일반 속성에 포함됨                                                           |
|       표기법       |                                                        실선                                                         |                                                                    점선                                                                    |
|   연결 고려사항    | 반드시 부모엔터티 종속, 자식 주식별자 구성에 부모 주식별자 포함 필요 O, 상속받은 주식별자 속성 타엔터티에 이전 필요 | 약한 종속관계, 자식 주식별자 구성에 부모 주식별자 포함 필요 X, 상속받은 주식별자 속성 타엔터티에 차단 필요, 부모쪽의 관계 참여가 선택 관계 |
